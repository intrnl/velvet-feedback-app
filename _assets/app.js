function k(l){let e=document.createElement("template");return e.innerHTML=l,e}function w(l){return document.importNode(l.content,!0)}function a(l,e){let t=l,n=0,r=e.length,s,o;for(;n<r;n++)for(s=e[n],t=t.firstChild,o=0;o<s;o++)t=t.nextSibling;return t}function C(l,e,t){if(l.replaceWith(e),t){let n=l.childNodes,r=n.length;for(;r--;)e.appendChild(n[0])}}function E(l,e){l.append(e)}function K(l,e){l.after(e)}function ae(l,e){let t=l;if(e.nextSibling!==l)for(;t;){let n=t;if(t=t.nextSibling,n.remove(),n===e)break}}function T(l,e,t,n){l.addEventListener(e,t,n)}function x(l,e,t){l.setAttribute(e,t)}function _(l,e,t){l.classList.toggle(e,t)}var Z=Object,Ne=Symbol,Ae=/\B([A-Z])/g;function pe(l){return l.replace(Ae,"-$1").toLowerCase()}var de=Z.is,Me=Z.assign,L=l=>typeof l=="function";var p,$=1<<0,S=1<<1,H=1<<2,G=1<<3,J=1<<4,z=1<<5,M,m,F,W=0,re=0,V=0;function he(){W++}function me(){if(W>1){W--;return}let l,e=!1;for(;F;){let t=F;for(F=p,re++;t;){let n=t.o;t.o=p,t.c&=~H;try{t.s()}catch(r){e||(l=r,e=!0)}t=n}}if(re=0,W--,e)throw l}function be(l){let e;if(m)if(e=l.j,!e||e.p!==m)e={d:0,c:0,l:p,g:l,e:m.b,h:p,p:m,i:p,m:p},m.b=e,l.j=e,m.c&J&&l.n(e);else if(e.c&S){e.c&=~S;let t=m.b,n=e.h,r=e.e;e!==t&&(n&&(n.e=r),r&&(r.h=n),t&&(t.h=e),e.h=p,e.e=t,m.b=e)}else e=p;try{return l.peek()}finally{e&&(e.d=l.d)}}function se(l){if(l.c&=~$,l.c&G)throw l.a;return l.a}function ve(l){for(let e=l.b;e;e=e.e){let t=e.g.j;t&&(e.l=t),e.g.j=e,e.c|=S}}function ge(l){let e=l.b,t;for(;e;){let n=e.e;e.c&S?(e.g.k(e),e.e=p):(t&&(t.h=e),e.h=p,e.e=t,t=e),e.g.j=e.l,e.l&&(e.l=p),e=n}l.b=t}function Oe(l){let e=this;ge(e),m=l,me(),e.c&=~$}var O=class{constructor(e){let t=this;t.d=0,t.a=e,t.j=p,t.f=p}n(e){let t=this;e.c&z||(e.c|=z,e.i=t.f,t.f&&(t.f.m=e),t.f=e)}k(e){let t=this,n=e.m,r=e.i;e.c&z&&(e.c&=~z,n&&(n.i=r,e.m=p),r&&(r.m=n,e.i=p),e===t.f&&(t.f=r))}subscribe(e){return f(()=>e(this.value))}set(e){return this.value=e}peek(){return this.a}get value(){return be(this)}set value(e){let t=this;if(e!==t.a){if(t.a=e,re>100)return;t.d++,V++,he();try{for(let n=t.f;n;n=n.i)n.p.q()}finally{me()}}}},Q=class extends O{constructor(e){super(p),this.r=e,this.b=p,this.c=S,this.t=V-1}n(e){let t=this;if(!t.f){t.c|=S|J;for(let n=t.b;n;n=n.e)n.g.n(n)}super.n(e)}k(e){let t=this;if(super.k(e),!t.f){t.c&=~J;for(let n=t.b;n;n=n.e)n.g.k(n)}}q(){let e=this;if(!(e.c&(H|$))){e.c|=S|H;for(let t=e.f;t;t=t.i)t.p.q()}}peek(){let e=this;if(e.c&=~H,e.c&$)return e.a;if(e.c|=$,!(e.c&S)&&e.f||e.t===V)return se(e);if(e.c&=~S,e.t=V,e.d>0){let s=e.b;for(;s&&s.g.d===s.d;){try{s.g.peek()}catch{}if(s.g.d!==s.d)break;s=s.e}if(!s)return se(e)}let t=e.a,n=e.c,r=m;try{m=e,ve(e),e.a=e.r(),e.c&=~G,(n&G||e.a!==t||e.d===0)&&e.d++}catch(s){e.a=s,e.c|=G,e.d++}finally{ge(e),m=r}return se(e)}get value(){let e=this;return e.c&$?e.a:be(e)}set value(e){super.value=e}},X=class{constructor(e){this.r=e,this.b=p,this.o=p,this.c=J}s(){let e=this;if(e.c&$)return;let t=e.u();try{e.r()}finally{t()}}u(){let e=this,t=m;return e.c|=$,he(),m=e,ve(e),Oe.bind(e,t)}q(){let e=this;e.c&(H|$)||(e.c|=H,e.o=F,F=e)}v(){let e=this;for(let t=e.b;t;t=t.e)t.g.k(t);e.b=p}},P=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=M,!e&&M&&M.scopes.push(t)}run(e){let t=M;try{return M=this,e()}finally{M=t}}clear(){let e=this,t=e.scopes,n=e.cleanups;for(let r of t)r.clear(),r.parent=p;for(let r of n)r();t.length=0,n.length=0}};function Y(l){return new P(l)}function R(l){L(l)&&M&&M.cleanups.push(l)}function b(l){return new O(l)}function oe(l){return new Q(l)}function f(l){let e=new X(l),t=e.v.bind(e);return e.s(),R(t),t}var Ce=!1,Re=1;var j=null,ie=Ne(),ee=class extends HTMLElement{$m=!1;$c=Y(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,n=e.constructor.$d;for(let r in n){let s=n[r];t[s]=b(ie)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,n=e.constructor.$s,r=e.$c,s=e.$h,o=e.shadowRoot,i=!1;o||(o=e.attachShadow({mode:"open"}),i=!0);let u=j;try{if(j=e,r.run(()=>t(o,e)),document.adoptedStyleSheets)i&&(o.adoptedStyleSheets=n);else for(let d of n)E(o,d.cloneNode(!0));for(let d of s){let c=d();L(c)&&r.cleanups.push(c)}s.length=0}finally{j=u}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,n){let r=this,s=r.constructor.$d;e in s&&(r.$p[s[e]].value=n===""?!0:n)}};function D(l,e,t,n){let r=[],s=Z.create(null);class o extends ee{static observedAttributes=r;static $c=e;static $a=s;static $d=t;static $s=n}for(let i in t){let u=t[i],d=pe(i);s[d]=i,r.push(d),Z.defineProperty(o.prototype,i,{get(){return this.$p[u].a},set(c){this.$p[u].value=c}})}return Ce&&(l="velvet-"+Re++),l&&customElements.define(l,o),o}function N(l){if(!document.adoptedStyleSheets){let t=document.createElement("style");return t.textContent=l,t}let e=new CSSStyleSheet;return e.replaceSync(l),e}function ce(l,e){let t=j.$p[l];return t.value===ie&&(t.value=L(e)?e():e),t}function te(){let l=j;return(e,t)=>{let n=new CustomEvent(e,{detail:t,bubbles:!1});l.dispatchEvent(n)}}function ue(l,e,t){let n=t&&oe(t),r=e(l,n&&n.value);if(!!r&&(L(r.destroy)&&R(()=>r.destroy()),n&&n.b&&L(r.update))){let s=!1;f(()=>{let o=n.value;if(!s){s=!0;return}r.update(o)})}}function U(l,e){let t=document.createTextNode("");C(l,t),f(()=>t.data=e())}function _e(l,e){let t=Y(),n,r;f(()=>{let s=e();s!==n&&(r&&(t.clear(),ke(l,r),r=null),n=s,s&&(r=t.run(()=>s(l))))})}function ye(l,e,t){let n=[];f(()=>{let r=t(),s=0,o=r.length,i=n.length;for(;s<o;s++)if(n[s]){let u=n[s][2];u.value=r[s]}else{let u=n[s-1],d=u?u[1]:l,c=b(r[s]),h=Y(!0);n[s]=[h,h.run(()=>e(d,c,s)),c]}if(i>o){let u=n[s-1],d=u?u[1]:l,c=n[i-1][1];for(;s<i;s++)n[s][0].clear();ke(d,c),n.length=o}}),R(()=>{for(let r=0,s=n.length;r<s;r++)n[r][0].clear()})}function le(l){if(l instanceof O)return l;let e=b();return R(l.subscribe(t=>e.value=t)),e}function ke(l,e){ae(l.nextSibling,e)}var Ye=k("<div class=score><button value=1>1</button><button value=2>2</button><button value=3>3</button><button value=4>4</button><button value=5>5</button><button value=6>6</button><button value=7>7</button><button value=8>8</button><button value=9>9</button><button value=10>10</button></div>"),Be=N(".score{display:grid;grid-auto-flow:column;grid-auto-columns:36px;grid-auto-rows:36px;justify-content:space-around}.button{cursor:pointer;user-select:none;background-color:#e8e8f8;font-weight:600;border:0;border-radius:50%}.button:hover{background-color:#cecede}.button.selected{color:#fff;background-color:#4c4cc8}");function qe(l,e){let t=te(),n=ce(0,null);function r(q){let fe=q.target.value;if(fe){let De=parseInt(fe);t("update:value",De)}}let s=w(Ye),o=a(s,[0,0]),i=a(s,[0,1]),u=a(s,[0,2]),d=a(s,[0,3]),c=a(s,[0,4]),h=a(s,[0,5]),v=a(s,[0,6]),A=a(s,[0,7]),g=a(s,[0,8]),y=a(s,[0,9]),I=a(s,[0]);x(o,"class","button"),f(()=>_(o,"selected",n.value===1)),x(i,"class","button"),f(()=>_(i,"selected",n.value===2)),x(u,"class","button"),f(()=>_(u,"selected",n.value===3)),x(d,"class","button"),f(()=>_(d,"selected",n.value===4)),x(c,"class","button"),f(()=>_(c,"selected",n.value===5)),x(h,"class","button"),f(()=>_(h,"selected",n.value===6)),x(v,"class","button"),f(()=>_(v,"selected",n.value===7)),x(A,"class","button"),f(()=>_(A,"selected",n.value===8)),x(g,"class","button"),f(()=>_(g,"selected",n.value===9)),x(y,"class","button"),f(()=>_(y,"selected",n.value===10)),T(I,"click",r),E(l,s)}var we=D("x-score-selector",qe,{value:0},[Be]);function ne(){return crypto.randomUUID()}var B=b([{id:ne(),message:"The service is great!",score:10,date:new Date("2022-08-10T06:57:00Z")},{id:ne(),message:"The service was okay",score:6,date:new Date("2022-07-20T13:00:00Z")}]);var Fe=k("<form><label for=field>How would you rate our services?</label><x></x><div class=input-group><input id=field type=text placeholder='The service is...' autofocus /><button type=submit>Add</button></div></form>"),Pe=k("<p class=error><!></p>"),Ke=N("form{background-color:#fff;padding:16px;border-radius:4px}label{font-weight:600;display:block;margin-bottom:8px}.input-group{display:flex;gap:8px;margin-top:16px}button,input{height:36px;box-sizing:border-box;outline-width:2px;outline-color:#d42560}input{flex-grow:1;padding:4px 8px;border:1px solid #989898;border-radius:4px}button{cursor:pointer;user-select:none;color:#fff;background-color:#e25b88;padding:4px 16px;border:0;border-radius:4px;outline-offset:2px}button:hover{background-color:#ea86a7}.error{font-size:14px;color:#ed143d;margin:8px 0 0}");function ze(l,e){let t=b(""),n=b(null),r=b(null),s=le(B);function o(g){g.preventDefault();let y=t.value.trim();if(y.length<1){r.value="You need to fill out the feedback message!";return}if(n.value==null){r.value="You need to give a score!";return}let I={id:ne(),message:y,score:n.value,date:new Date};B.set([I,...s.value]),t.value="",n.value=null,r.value=null}let i=w(Fe),u=new we,d=a(i,[0,1]),c=a(i,[0,2,0]),h=a(i,[0,2]),v=a(i,[0]),A=g=>{let y=w(Pe),I=a(y,[0,0]),q=a(y,[0]);return U(I,()=>r.value),K(g,y),q};f(()=>u.value=n.value),T(u,"update:value",g=>n.value=g.detail),C(d,u,!0),f(()=>c.value=t.value),T(c,"input",()=>t.value=c.value),_e(h,()=>r.value?A:null),T(v,"submit",o),E(l,i)}var Ee=D("x-feedback-form",ze,{},[Ke]);function Ge(l){let e=Math.abs(l);return e<1e3?[0,"second"]:e<6e4?[Math.trunc(l/1e3),"second"]:e<36e5?[Math.trunc(l/6e4),"minute"]:e<864e5?[Math.trunc(l/36e5),"hour"]:e<6048e5?[Math.trunc(l/864e5),"day"]:e<24192e5?[Math.trunc(l/6048e5),"week"]:e<290304e5?[Math.trunc(l/24192e5),"month"]:[Math.trunc(l/290304e5),"year"]}function We(l){let e=Math.abs(l);return e<6e4?1e3:e<36e5?6e4:e<864e5?36e5:864e5}function Se(l,e){let t=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),n,r=()=>{if(e==null){l.textContent="N/A",l.removeAttribute("datetime");return}let s=new Date(e),o=s.getTime(),i=Date.now(),u=o-i,[d,c]=Ge(u),h=t.format(d,c);l.textContent=h,l.setAttribute("datetime",s.toISOString()),n=setTimeout(r,We(u))};return r(),{update(s){e=s,clearTimeout(n),r()},destroy(){clearTimeout(n)}}}var Ve=k("<div class=aggregate><span><!> feedback posted</span><span><!> average rating</span></div><ul class=list><!></ul>"),Ze=k("<li class=item><div class=body><div class=header><span>rated <!></span><span>posted <time></time></span></div><p class=text><!></p></div> <button class=delete-btn><svg class=delete-icon fill=none viewBox='0 0 24 24' stroke=currentColor stroke-width=2> <path stroke-linecap=round stroke-linejoin=round d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'></path> </svg></button></li>"),Je=N(".aggregate{color:#fff;display:flex;justify-content:space-between;gap:8px;padding:0 16px 8px}.list{list-style-type:none;padding:0;margin:0}.item{display:flex;gap:8px;background-color:#fff;padding:8px 12px 8px 16px;border-radius:4px}.item+.item{margin-top:8px}.body{flex-grow:1}.header{color:#656570;font-size:14px;display:flex;justify-content:space-between;gap:8px;margin-bottom:2px}.text{margin:0}.delete-btn{background-color:transparent;height:24px;width:24px;padding:0;margin:0;border:0;border-radius:4px}.delete-btn:hover{color:#fff;background-color:#ed143d}.delete-icon{height:16px;width:16px;vertical-align:middle}");function Qe(l,e){let t=le(B);function n(c){B.set(t.value.filter(h=>h.id!==c.id))}let r=b(0);f(()=>{let c=0,h=t.value.length;if(!h)r.value=0;else{for(let g of t.value)c+=g.score;let v=c/h,A=Math.trunc(v*100)/100;r.value=A}});let s=w(Ve),o=a(s,[0,0,0]),i=a(s,[0,1,0]),u=a(s,[1,0]),d=(c,h)=>{let v=w(Ze),A=a(v,[0,0,0,0,1]),g=a(v,[0,0,0,1,1]),y=a(v,[0,0,1,0]),I=a(v,[0,2]),q=a(v,[0]);return U(A,()=>h.value.score),ue(g,Se,()=>h.value.date),U(y,()=>h.value.message),T(I,"click",()=>n(h.value)),K(c,v),q};U(o,()=>t.value.length),U(i,()=>r.value),ye(u,d,()=>t.value),E(l,s)}var $e=D("x-feedback-list",Qe,{},[Je]);var Xe=k("<main><x></x><x></x></main>"),et=N("main{display:flex;flex-direction:column;gap:16px;max-width:600px;margin:36px auto}");function tt(l,e){let t=w(Xe),n=new Ee,r=a(t,[0,0]),s=new $e,o=a(t,[0,1]);C(r,n,!0),C(o,s,!0),E(l,t)}var Te=D("x-app",tt,{},[et]);var lt=new Te;document.body.appendChild(lt);
//# sourceMappingURL=app.js.map
