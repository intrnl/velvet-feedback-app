var J=Object.create(null);function _(t){if(t in J)return J[t];let e=document.createElement("template");return e.innerHTML=t,J[t]=e,e}function y(t){return t.content.cloneNode(!0)}function o(t,e){let l=t,n,s,a,r;for(n=0,s=e.length;n<s;n++)for(a=e[n],l=l.firstChild,r=0;r<a;r++)l=l.nextSibling;return l}function N(t,e,l){if(t.replaceWith(e),l){let n=t.childNodes,s=n.length;for(;s--;)e.appendChild(n[0])}}function w(t,e){t.append(e)}function K(t,e){t.after(e)}function X(t,e){let l=t;if(e.nextSibling!==t)for(;l;){let n=l;if(l=l.nextSibling,n.remove(),n===e)break}}function S(t,e,l,n){t.addEventListener(e,l,n)}function v(t,e,l){t.setAttribute(e,l)}function g(t,e,l){t.classList.toggle(e,l)}var B=Object,ye=Symbol,P=Set,ke=/\B([A-Z])/g;function se(t){return t.replace(ke,"-$1").toLowerCase()}var re=B.is,we=B.assign,R=t=>typeof t=="function";var k=null,H=null,U=new P,D=new P,Q=0,oe=[],T=null,F=class{parent=null;scopes=[];cleanups=[];constructor(e){let l=this;!e&&k&&(k.scopes.push(l),l.parent=k)}run(e){let l=k;try{return k=this,e()}finally{k=l}}clear(){let e=this,l=e.cleanups,n=e.scopes;for(let s of l)s();for(let s of n)s.parent=null,s.clear();l.length=0,n.length=0}},j=class{a;d=new P;b=new P;c=0;f=!1;e=!1;g=!1;constructor(e){this.a=e}peek(){return this.a}set(e){return this.value=e}subscribe(e){return f(()=>e(this.value))}get value(){let e=this;return e.e||fe(e),H&&(this.d.add(H),H.b.add(e),U.delete(e)),this.a}set value(e){let l=this;if(l.a!==e){l.a=e;let n=D.size===0;if(D.add(l),l.c===0&&ue(l),n&&Q===0&&(ee(D),D.clear(),T)){let s=T;throw T=null,s}}}h(){}i(){let e=this,l=H,n=U;return H=e,U=e.b,e.b=new P,(s,a)=>{if(s)for(let r of e.d)ie(r);for(let r of U)(a?ce:Ee)(e,r);U.clear(),U=n,H=l}}};function ue(t){if(t.c++===0)for(let e of t.d)ue(e)}function ie(t){if(!t.f&&t.c>0&&--t.c===0)for(let e of t.d)ie(e)}function ee(t){for(let e of t)if(e.c>0&&(e.f=!0,--e.c===0)){if(e.g)continue;e.f=!1,e.g=!0,e.h(),e.g=!1,ee(e.d)}}function Ee(t,e){t.e=!0,t.b.add(e),e.d.add(t)}function ce(t,e){if(t.b.delete(e),e.d.delete(t),e.d.size===0){e.e=!1;for(let l of e.b)ce(e,l)}}function Se(t){if(D.delete(t),t.c=0,t.g=!0,t.h(),t.g=!1,T){let e=T;throw T=null,e}for(let e of t.d)e.c>0&&(e.c>1&&e.c--,oe.push(e))}function fe(t){t.e=!0,Se(t)}function Y(t){return new F(t)}function h(t){return new j(t)}function G(t){let e=new j(void 0);return e.h=()=>{let l=e.i();try{let n=t();l(e.a===n,!0),e.a=n}catch(n){T||(T=n),l(!0,!1)}},e}function V(t){Q++;try{return t()}finally{let e;for(;e=oe.pop();)D.add(e);--Q===0&&(ee(D),D.clear())}}function f(t){let e=G(()=>V(t)),l=()=>e.i()(!0,!0);return fe(e),k&&k.cleanups.push(l),l}function E(t){k&&R(t)&&k.cleanups.push(t)}var $e=!1,Me=1;var I=null,te=ye(),W=class extends HTMLElement{$m=!1;$c=Y(!0);$p={};$h=[];constructor(){super();let e=this,l=e.$p,n=e.constructor.$d;for(let s in n){let a=n[s];l[a]=h(te)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let l=e.constructor.$c,n=e.constructor.$s,s=e.$c,a=e.$h,r=e.shadowRoot,i=!1;r||(r=e.attachShadow({mode:"open"}),i=!0);let c=I;try{if(I=e,s.run(()=>l(r,e)),document.adoptedStyleSheets)i&&(r.adoptedStyleSheets=n);else for(let p of n)w(r,p.cloneNode(!0));for(let p of a){let u=p();R(u)&&s.cleanups.push(u)}a.length=0}finally{I=c}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,l,n){let s=this,a=s.constructor.$d;e in a&&(s[a[e]]=n===""?!0:n)}};function $(t,e,l,n){let s=[],a=B.create(null);class r extends W{static observedAttributes=s;static $c=e;static $a=a;static $d=l;static $s=n}for(let i in l){let c=l[i],p=se(i);a[p]=i,s.push(p),B.defineProperty(r.prototype,i,{get(){return this.$p[c].a},set(u){this.$p[c].value=u}})}return $e&&(t="velvet-"+Me++),t&&customElements.define(t,r),r}function M(t){if(!document.adoptedStyleSheets){let l=document.createElement("style");return l.textContent=t,l}let e=new CSSStyleSheet;return e.replaceSync(t),e}function le(t,e){let l=I.$p[t];return l.value===te&&(l.value=R(e)?e():e),l}function q(){let t=I;return(e,l)=>{let n=new CustomEvent(e,{detail:l,bubbles:!1});t.dispatchEvent(n)}}function ne(t,e,l){let n=l&&G(l),s=e(t,n&&n.value);if(!!s&&(R(s.destroy)&&E(()=>s.destroy()),n&&n.b.size>0&&R(s.update))){let a=!1;f(()=>{let r=n.value;if(!a){a=!0;return}s.update(r)})}}function C(t,e){let l=document.createTextNode("");N(t,l),f(()=>l.data=e())}function pe(t,e){let l=Y(),n,s;f(()=>{let a=e();a!==n&&(s&&(l.clear(),he(t,s),s=null),n=a,a&&(s=l.run(()=>a(t))))})}function de(t,e,l){let n=[];f(()=>{let s=l(),a=0,r=s.length,i=n.length;for(;a<r;a++)if(n[a]){let c=n[a][2];c.value=s[a]}else{let c=n[a-1],p=c?c[1]:t,u=h(s[a]),d=Y(!0);n[a]=[d,d.run(()=>e(p,u,a)),u]}if(i>r){let c=n[a-1],p=c?c[1]:t,u=n[i-1][1];for(;a<i;a++)n[a][0].clear();he(p,u),n.length=r}}),E(()=>{for(let s of n)s[0].clear()})}function he(t,e){X(t.nextSibling,e)}var Ce=_("<div class=score> <button value=1>1</button> <button value=2>2</button> <button value=3>3</button> <button value=4>4</button> <button value=5>5</button> <button value=6>6</button> <button value=7>7</button> <button value=8>8</button> <button value=9>9</button> <button value=10>10</button> </div>"),He=M(".score{display:grid;grid-auto-flow:column;grid-auto-columns:36px;grid-auto-rows:36px;justify-content:space-around}.button{cursor:pointer;user-select:none;background-color:#e8e8f8;font-weight:600;border:0;border-radius:50%}.button:hover{background-color:#cecede}.button.selected{color:#fff;background-color:#4c4cc8}");function Ue(t,e){let l=q(),n=le(0,null);function s(z){let ae=z.target.value;if(ae){let _e=parseInt(ae);l("update:value",_e)}}let a=y(Ce),r=o(a,[0,1]),i=o(a,[0,3]),c=o(a,[0,5]),p=o(a,[0,7]),u=o(a,[0,9]),d=o(a,[0,11]),b=o(a,[0,13]),A=o(a,[0,15]),m=o(a,[0,17]),x=o(a,[0,19]),O=o(a,[0]);v(r,"class","button"),f(()=>g(r,"selected",n.value===1)),v(i,"class","button"),f(()=>g(i,"selected",n.value===2)),v(c,"class","button"),f(()=>g(c,"selected",n.value===3)),v(p,"class","button"),f(()=>g(p,"selected",n.value===4)),v(u,"class","button"),f(()=>g(u,"selected",n.value===5)),v(d,"class","button"),f(()=>g(d,"selected",n.value===6)),v(b,"class","button"),f(()=>g(b,"selected",n.value===7)),v(A,"class","button"),f(()=>g(A,"selected",n.value===8)),v(m,"class","button"),f(()=>g(m,"selected",n.value===9)),v(x,"class","button"),f(()=>g(x,"selected",n.value===10)),S(O,"click",s),w(t,a)}var me=$("x-score-selector",Ue,{value:0},[He]);function Z(){return crypto.randomUUID()}var L=h([{id:Z(),message:"The service is great!",score:10,date:new Date("2022-08-10T06:57:00Z")},{id:Z(),message:"The service was okay",score:6,date:new Date("2022-07-20T13:00:00Z")}]);var Ie=_("<form> <label for=field>How would you rate our services?</label> <x></x> <div class=input-group> <input id=field type=text placeholder='The service is...' autofocus /> <button type=submit>Add</button> </div> <!> </form>"),Re=_("<p class=error><!></p>"),je=M("form{background-color:#fff;padding:16px;border-radius:4px}label{font-weight:600;display:block;margin-bottom:8px}.input-group{display:flex;gap:8px;margin-top:16px}button,input{height:36px;box-sizing:border-box;outline-width:2px;outline-color:#d42560}input{flex-grow:1;padding:4px 8px;border:1px solid #989898;border-radius:4px}button{cursor:pointer;user-select:none;color:#fff;background-color:#e25b88;padding:4px 16px;border:0;border-radius:4px;outline-offset:2px}button:hover{background-color:#ea86a7}.error{font-size:14px;color:#ed143d;margin:8px 0 0}");function Ye(t,e){let l=h(""),n=h(null),s=h(null),a=h();E(L.subscribe(m=>a.value=m));function r(m){m.preventDefault();let x=l.value.trim();if(x.length<1){s.value="You need to fill out the feedback message!";return}if(n.value==null){s.value="You need to give a score!";return}let O={id:Z(),message:x,score:n.value,date:new Date};L.set([O,...a.value]),l.value="",n.value=null,s.value=null}let i=y(Ie),c=new me,p=o(i,[0,3]),u=o(i,[0,5,1]),d=o(i,[0,7]),b=o(i,[0]),A=m=>{let x=y(Re),O=o(x,[0,0]),z=o(x,[0]);return C(O,()=>s.value),K(m,x),z};f(()=>c.value=n.value),S(c,"update:value",m=>n.value=m.detail),N(p,c,!0),f(()=>u.value=l.value),S(u,"input",()=>l.value=u.value),pe(d,()=>s.value?A:null),S(b,"submit",r),w(t,i)}var be=$("x-feedback-form",Ye,{},[je]);function Le(t){let e=Math.abs(t);return e<1e3?[0,"second"]:e<6e4?[Math.trunc(t/1e3),"second"]:e<36e5?[Math.trunc(t/6e4),"minute"]:e<864e5?[Math.trunc(t/36e5),"hour"]:e<6048e5?[Math.trunc(t/864e5),"day"]:e<24192e5?[Math.trunc(t/6048e5),"week"]:e<290304e5?[Math.trunc(t/24192e5),"month"]:[Math.trunc(t/290304e5),"year"]}function ze(t){let e=Math.abs(t);return e<6e4?1e3:e<36e5?6e4:e<864e5?36e5:864e5}function ve(t,e){let l=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),n,s=()=>{if(e==null){t.textContent="N/A",t.removeAttribute("datetime");return}let a=new Date(e),r=a.getTime(),i=Date.now(),c=r-i,[p,u]=Le(c),d=l.format(p,u);t.textContent=d,t.setAttribute("datetime",a.toISOString()),n=setTimeout(s,ze(c))};return s(),{update(a){e=a,clearTimeout(n),s()},destroy(){clearTimeout(n)}}}var Pe=_("<div class=aggregate> <span><!> feedback posted</span> <span><!> average rating</span> </div> <ul class=list> <!> </ul>"),Fe=_("<li class=item> <div class=body> <div class=header> <span>rated <!></span> <span>posted <time></time></span> </div> <p class=text><!></p> </div> <button class=delete-btn> <svg class=delete-icon fill=none viewBox='0 0 24 24' stroke=currentColor stroke-width=2> <path stroke-linecap=round stroke-linejoin=round d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'></path> </svg> </button> </li>"),Ke=M(".aggregate{color:#fff;display:flex;justify-content:space-between;gap:8px;padding:0 16px 8px}.list{list-style-type:none;padding:0;margin:0}.item{display:flex;gap:8px;background-color:#fff;padding:8px 12px 8px 16px;border-radius:4px}.item+.item{margin-top:8px}.body{flex-grow:1}.header{color:#656570;font-size:14px;display:flex;justify-content:space-between;gap:8px;margin-bottom:2px}.text{margin:0}.delete-btn{background-color:transparent;height:24px;width:24px;padding:0;margin:0;border:0;border-radius:4px}.delete-btn:hover{color:#fff;background-color:#ed143d}.delete-icon{height:16px;width:16px;vertical-align:middle}");function Be(t,e){let l=h();E(L.subscribe(u=>l.value=u));function n(u){L.set(l.value.filter(d=>d.id!==u.id))}let s=h(0);f(()=>{let u=0,d=l.value.length;if(!d)s.value=0;else{for(let m of l.value)u+=m.score;let b=u/d,A=Math.trunc(b*100)/100;s.value=A}});let a=y(Pe),r=o(a,[0,1,0]),i=o(a,[0,3,0]),c=o(a,[2,1]),p=(u,d)=>{let b=y(Fe),A=o(b,[0,1,1,1,1]),m=o(b,[0,1,1,3,1]),x=o(b,[0,1,3,0]),O=o(b,[0,3]),z=o(b,[0]);return C(A,()=>d.value.score),ne(m,ve,()=>d.value.date),C(x,()=>d.value.message),S(O,"click",()=>n(d.value)),K(u,b),z};C(r,()=>l.value.length),C(i,()=>s.value),de(c,p,()=>l.value),w(t,a)}var ge=$("x-feedback-list",Be,{},[Ke]);var We=_("<main> <x></x> <x></x> </main>"),Ge=M("main{display:flex;flex-direction:column;gap:16px;max-width:600px;margin:36px auto}");function Ve(t,e){let l=y(We),n=new be,s=o(l,[0,1]),a=new ge,r=o(l,[0,3]);N(s,n,!0),N(r,a,!0),w(t,l)}var xe=$("x-app",Ve,{},[Ge]);var qe=new xe;document.body.appendChild(qe);
//# sourceMappingURL=app.js.map
