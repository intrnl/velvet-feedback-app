var _e=Object,je=Symbol,Ye=/\B([A-Z])/g;function we(n){return n.replace(Ye,"-$1").toLowerCase()}var z=n=>typeof n=="function";var I,D=1,W=2,P=4,pe=8,q=16,F=32,Le=(n,e)=>n.c-e.c,g,m,x,h=0,te,le=0,he=0,K=0;function Ee(){le++}function $e(){if(le>1){le--;return}let n,e=!1;for(;te;){let t=te.sort(Le),l=0,s=t.length;for(te=I,he++;l<s;l++){let r=t[l];if(r.d&=~W,!(r.d&pe)&&Se(r))try{r.m()}catch(i){e||(n=i,e=!0)}}}if(he=0,le--,e)throw n}function Se(n){let e=n.b,t=e.length,l=0,s;for(;l<t;l++)if(s=e[l],s.e>n.e||s.h())return!0;return!1}function Te(){let n=m.b;if(x){if(ye(),h>0){let l=x.length,s=0;for(n.length=h+l;s<l;s++)n[h+s]=x[s]}else n=m.b=x;let e=n.length,t=h;for(;t<e;t++){let l=n[t];l.i=I,m.d&F&&l.j(m)}}else h<m.b.length&&(ye(),n.length=h);for(;h--;){let e=n[h];e.i=I}}function ye(){let n=m.b,e=n.length,t=h;for(;t<e;t++)n[t].g(m)}function ke(n){let e=n.b,t=e.length,l=0;for(;l<t;l++)e[l].g(n);e.length=0}var B=class{constructor(e){let t=this;t.a=e,t.e=-1,t.f=[],t.i=I}h(){return!1}j(e){this.f.push(e)}g(e){let l=this.f,s=l.indexOf(e);l.splice(s,1)}peek(){return this.a}get value(){let e=this;return m&&e.i!==m&&(e.i=m,x?x.push(e):m.b[h]===e?h++:x=[e]),e.a}set value(e){let t=this;if(t.a!==e&&(t.a=e,t.e=++K,he<100)){let l=t.f,s=l.length,r=0;for(Ee();r<s;r++)l[r].k();$e()}}},ne=class extends B{constructor(e){super();let t=this;t.l=e,t.b=[],t.d=P,t.n=-1}h(){let e=this;if(e.d&=~W,e.d&D||(e.d&(P|F))===F||(e.d&=~P,e.n===K))return!1;if(e.n=K,e.d|=D,e.e>-1&&!Se(e))return e.d&=~D,!1;let t=!1,l=m,s=x,r=h;try{m=e,x=I,h=0;let i=e.l();(e.d&q||e.a!==i||e.e===-1)&&(t=!0,e.a=i,e.d&=~q,e.e=++K)}catch(i){t=!0,e.a=i,e.d|=q,e.e=++K}return Te(),m=l,x=s,h=r,e.d&=~D,t}j(e){let t=this;if(t.f.length<1){let l=t.b,s=l.length,r=0;for(t.d|=F;r<s;r++)l[r].j(t)}super.j(e)}g(e){let t=this;if(super.g(e),t.f.length<1){let l=t.b,s=l.length,r=0;for(t.d&=~F;r<s;r++)l[r].g(t)}}k(){let e=this;if(!(e.d&(W|D))){let t=e.f,l=t.length,s=0;for(e.d|=P|W;s<l;s++)t[s].k()}}peek(){let e=this;if(e.h(),e.d&q)throw e.a;return e.a}get value(){let e=this;if(e.h(),e.d&q)throw super.value;return super.value}set value(e){super.value=e}},se=class{constructor(e){let t=this;t.l=e,t.e=0,t.b=[],t.d=F,t.c=0}m(){let e=this;if(e.d&D)return;e.e=K,e.d|=D,e.d&=~P;let t=m,l=x,s=h;try{Ee(),m=e,x=I,h=0,e.l()}finally{Te(),m=t,x=l,h=s,e.d&=~D,e.d&pe&&ke(e),$e()}}k(){let e=this;e.d&(W|D)||(e.d|=P|W,(te||=[]).push(e))}o(){let e=this;e.d|=pe,e.d&D||ke(e)}},J=class{constructor(e){let t=this;t.scopes=[],t.cleanups=[],t.parent=I,t.c=0,!e&&g&&(t.parent=g,t.c=g.c+1,g.scopes.push(t))}run(e){let t=g;try{return g=this,e()}finally{g=t}}clear(){let e=this,t=e.scopes,l=e.cleanups;for(let s of t)s.clear(),s.parent=I;for(let s of l)s();t.length=0,l.length=0}};function Q(n){return new J(n)}function X(n){z(n)&&g&&g.cleanups.push(n)}function _(n){return new B(n)}function me(n){return new ne(n)}function d(n){let e=new se(n),t=e.o.bind(e);try{e.m()}catch(l){throw t(),l}return g&&e.b.length>0&&(e.c=g.c,g.cleanups.push(t)),t}var Pe=!1,Fe=1;var G=null,be=je(),re=class extends HTMLElement{$m=!1;$c=Q(!0);$p={};$h=[];constructor(){super();let e=this,t=e.$p,l=e.constructor.$d;for(let s in l){let r=l[s];t[r]=_(be)}}connectedCallback(){let e=this;if(!e.$m){e.$m=!0;let t=e.constructor.$c,l=e.constructor.$s,s=e.$c,r=e.$h,i=e.shadowRoot;i||(i=e.attachShadow({mode:"open"}),i.adoptedStyleSheets=l);let c=G;try{G=e,s.run(()=>t(i,e));for(let f of r){let u=f();z(u)&&s.cleanups.push(u)}r.length=0}finally{G=c}}}disconnectedCallback(){let e=this;e.$m&&(e.$c.clear(),e.shadowRoot.innerHTML="",e.$m=!1)}attributeChangedCallback(e,t,l){let s=this,r=s.constructor.$d;e in r&&(s.$p[r[e]].value=l===""?!0:l)}};function C(n,e,t,l){let s=[],r=_e.create(null);class i extends re{static observedAttributes=s;static $c=e;static $a=r;static $d=t;static $s=l}for(let c in t){let f=t[c],u=we(c);r[u]=c,s.push(u),_e.defineProperty(i.prototype,c,{get(){return this.$p[f].a},set(S){this.$p[f].value=S}})}return Pe&&(n="velvet-"+Fe++),n&&customElements.define(n,i),i}function M(n){let e=new CSSStyleSheet;return e.replaceSync(n),e}function ve(n,e){let t=G.$p[n];return t.value===be&&(t.value=z(e)?e():e),t}function ie(){let n=G;return(e,t)=>{let l=new CustomEvent(e,{detail:t,bubbles:!1});n.dispatchEvent(l)}}function ge(n,e,t){let l=t&&me(t),s=e(n,l&&l.value);if(s&&(z(s.destroy)&&X(()=>s.destroy()),l&&l.b&&z(s.update))){let r=!1;d(()=>{let i=l.value;if(!r){r=!0;return}s.update(i)})}}function w(n,e){let t=document.createElement("template");if(t.innerHTML=n,e){let l=t.content,s=l.firstChild,r;for(s.remove();r=s.firstChild;)l.appendChild(r)}return t}function E(n){return document.importNode(n.content,!0)}function a(n){return n.firstChild}function o(n){return n.nextSibling}function N(n,e,t){if(n.replaceWith(e),t){let l;for(;l=n.firstChild;)e.appendChild(l)}}function $(n,e){n.append(e)}function Z(n,e){n.after(e)}function De(n,e){let t=n;if(e.nextSibling!==n)for(;t;){let l=t;if(t=t.nextSibling,l.remove(),l===e)break}}function O(n,e,t,l){n.addEventListener(e,t,l)}function y(n,e,t){n.classList.toggle(e,t)}function j(n,e,t){let l=document.createTextNode("");t(n,l),d(()=>l.data=e())}function Ae(n,e){let t=Q(),l,s;d(()=>{let r=e();r!==l&&(s&&(t.clear(),Me(n,s),s=null),l=r,r&&(s=t.run(()=>r(n))))})}function Ce(n,e,t){let l=[],s=g.c+1;d(()=>{let r=t(),i=0,c=r.length,f=l.length;for(;i<c;i++)if(l[i]){let u=l[i][2];u.value=r[i]}else{let u=l[i-1],S=u?u[1]:n,p=_(r[i]),A=Q(!0);A.c=s,l[i]=[A,A.run(()=>e(S,p,i)),p]}if(f>c){let u=l[i-1],S=u?u[1]:n,p=l[f-1][1];for(;i<f;i++)l[i][0].clear();Me(S,p),l.length=c}}),X(()=>{for(let r=0,i=l.length;r<i;r++)l[r][0].clear()})}function Me(n,e){De(n.nextSibling,e)}var Je=w("<div class=score><button class=button value=1>1</button><button class=button value=2>2</button><button class=button value=3>3</button><button class=button value=4>4</button><button class=button value=5>5</button><button class=button value=6>6</button><button class=button value=7>7</button><button class=button value=8>8</button><button class=button value=9>9</button><button class=button value=10>10</button></div>"),Qe=M(".score{display:grid;grid-auto-flow:column;grid-auto-columns:36px;grid-auto-rows:36px;justify-content:space-around}.button{cursor:pointer;user-select:none;background-color:#e8e8f8;font-weight:600;border:0;border-radius:50%}.button:hover{background-color:#cecede}.button.selected{color:#fff;background-color:#4c4cc8}");function Xe(n,e){let t=ie(),l=ve(0,null);function s(de){let fe=de.target.value;if(fe){let ee=parseInt(fe);t("update:value",ee)}}let r=E(Je),i=a(r),c=a(i),f=a(c),u=o(c),S=a(u),p=o(u),A=a(p),U=o(p),H=a(U),Y=o(U),R=a(Y),b=o(Y),k=a(b),v=o(b),T=a(v),L=o(v),ce=a(L),V=o(L),He=a(V),ue=o(V),xe=a(ue);O(i,"click",s),d(()=>y(c,"selected",l.value===1)),d(()=>y(u,"selected",l.value===2)),d(()=>y(p,"selected",l.value===3)),d(()=>y(U,"selected",l.value===4)),d(()=>y(Y,"selected",l.value===5)),d(()=>y(b,"selected",l.value===6)),d(()=>y(v,"selected",l.value===7)),d(()=>y(L,"selected",l.value===8)),d(()=>y(V,"selected",l.value===9)),d(()=>y(ue,"selected",l.value===10)),$(n,r)}var Ne=C("x-score-selector",Xe,{value:0},[Qe]);function ae(){return crypto.randomUUID()}var oe=_([{id:ae(),message:"The service is great!",score:10,date:new Date("2022-08-10T06:57:00Z")},{id:ae(),message:"The service was okay",score:6,date:new Date("2022-07-20T13:00:00Z")}]);var et=w("<form><label for=field>How would you rate our services?</label><x></x><div class=input-group><input id=field type=text placeholder='The service is...'autofocus><button type=submit>Add</button></div></form>"),tt=w("<p class=error></p>"),lt=M("form{background-color:#fff;padding:16px;border-radius:4px}label{font-weight:600;display:block;margin-bottom:8px}.input-group{display:flex;gap:8px;margin-top:16px}button,input{height:36px;box-sizing:border-box;outline-width:2px;outline-color:#d42560}input{flex-grow:1;padding:4px 8px;border:1px solid #989898;border-radius:4px}button{cursor:pointer;user-select:none;color:#fff;background-color:#e25b88;padding:4px 16px;border:0;border-radius:4px;outline-offset:2px}button:hover{background-color:#ea86a7}.error{font-size:14px;color:#ed143d;margin:8px 0 0}");function nt(n,e){let t=_(""),l=_(null),s=_(null),r=oe;function i(k){k.preventDefault();let v=t.value.trim();if(v.length<1){s.value="You need to fill out the feedback message!";return}if(l.value==null){s.value="You need to give a score!";return}let T={id:ae(),message:v,score:l.value,date:new Date};r.value=[T,...r.value],t.value="",l.value=null,s.value=null}let c=E(et),f=a(c),u=a(f),S=a(u),p=o(u),A=new Ne,U=o(p),H=a(U),R=a(o(H)),b=k=>{let v=E(tt),T=a(v);return j(T,()=>s.value,$),Z(k,v),T};O(f,"submit",i),d(()=>A.value=l.value),O(A,"update:value",k=>l.value=k.detail),N(p,p=A,!0),d(()=>H.value=t.value),O(H,"input",()=>t.value=H.value),Ae(U,()=>s.value?b:null),$(n,c)}var Oe=C("x-feedback-form",nt,{},[lt]);function st(n){let e=Math.abs(n);return e<1e3?[0,"second"]:e<6e4?[Math.trunc(n/1e3),"second"]:e<36e5?[Math.trunc(n/6e4),"minute"]:e<864e5?[Math.trunc(n/36e5),"hour"]:e<6048e5?[Math.trunc(n/864e5),"day"]:e<24192e5?[Math.trunc(n/6048e5),"week"]:e<290304e5?[Math.trunc(n/24192e5),"month"]:[Math.trunc(n/290304e5),"year"]}function rt(n){let e=Math.abs(n);return e<6e4?1e3:e<36e5?6e4:e<864e5?36e5:864e5}function Re(n,e){let t=new Intl.RelativeTimeFormat("en",{numeric:"auto"}),l,s=()=>{if(e==null){n.textContent="N/A",n.removeAttribute("datetime");return}let r=new Date(e),i=r.getTime(),c=Date.now(),f=i-c,[u,S]=st(f),p=t.format(u,S);n.textContent=p,n.setAttribute("datetime",r.toISOString()),l=setTimeout(s,rt(f))};return s(),{update(r){e=r,clearTimeout(l),s()},destroy(){clearTimeout(l)}}}var it=w("<div class=aggregate><span><!> feedback posted</span><span><!> average rating</span></div><ul class=list><!></ul>"),at=w("<li class=item><div class=body><div class=header><span>rated </span><span>posted <time></time></span></div><p class=text></p></div> <button class=delete-btn><svg class=delete-icon fill=none viewBox='0 0 24 24'stroke=currentColor stroke-width=2><path stroke-linecap=round stroke-linejoin=round d='M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16'></svg></button></li>"),ot=M(".aggregate{color:#fff;display:flex;justify-content:space-between;gap:8px;padding:0 16px 8px}.list{list-style-type:none;padding:0;margin:0}.item{display:flex;gap:8px;background-color:#fff;padding:8px 12px 8px 16px;border-radius:4px}.item+.item{margin-top:8px}.body{flex-grow:1}.header{color:#656570;font-size:14px;display:flex;justify-content:space-between;gap:8px;margin-bottom:2px}.text{margin:0}.delete-btn{background-color:transparent;height:24px;width:24px;padding:0;margin:0;border:0;border-radius:4px}.delete-btn:hover{color:#fff;background-color:#ed143d}.delete-icon{height:16px;width:16px;vertical-align:middle}");function ct(n,e){let t=oe;function l(R){t.value=t.value.filter(b=>b.id!==R.id)}let s=_(0);d(()=>{let R=0,b=t.value.length;if(!b)s.value=0;else{for(let T of t.value)R+=T.score;let k=R/b,v=Math.trunc(k*100)/100;s.value=v}});let r=E(it),i=a(r),c=a(i),f=a(c),u=o(f),p=a(o(c)),A=o(p),H=a(o(i)),Y=(R,b)=>{let k=E(at),v=a(k),T=a(v),L=a(T),ce=a(L),V=a(ce),xe=o(a(o(ce))),de=o(L),ee=o(o(T)),mt=a(a(ee));return j(V,()=>b.value.score,Z),ge(xe,Re,()=>b.value.date),j(de,()=>b.value.message,$),O(ee,"click",()=>l(b.value)),Z(R,k),v};j(f,()=>t.value.length,N),j(p,()=>s.value,N),Ce(H,Y,()=>t.value),$(n,r)}var Ie=C("x-feedback-list",ct,{},[ot]);var ut=w("<main><x></x><x></x></main>"),dt=M("main{display:flex;flex-direction:column;gap:16px;max-width:600px;margin:36px auto}");function ft(n,e){let t=E(ut),s=a(a(t)),r=new Oe,i=o(s),c=new Ie;N(s,s=r,!0),N(i,i=c,!0),$(n,t)}var Ue=C("x-app",ft,{},[dt]);var pt=new Ue;document.body.appendChild(pt);
//# sourceMappingURL=app.js.map
